# This is the Container for the MariaDB Database
#
# We need to do the following:
	# 1. Create a Docker Container from base image debian:bullseye
	# 2. Install the required packages
	#		- mariadb-server
	#		- iputils-ping (to be able to ping the container)
	# 3. Remove the apt cache
	# 4. Copy the configuration files
	#		- setup_db.sh 	(which is the script to setup the database)
	#		- setup_db.sql	(which is the sql script to create the database)

	FROM debian:bullseye

	# Steps 1 - 3
	RUN apt update && \
		apt install -y mariadb-server && \
		rm -rf /var/lib/apt/lists/*
	
	# Copy the configuration files and set the permissions
	COPY	setup_db.sh	/etc/mysql/setup_db.sh
	RUN		chmod +x 	/etc/mysql/setup_db.sh
		
	
	# Expose the port
	EXPOSE 3306
	
	# Setup the database and start the database server
	ENTRYPOINT [ "/etc/mysql/setup_db.sh" ]